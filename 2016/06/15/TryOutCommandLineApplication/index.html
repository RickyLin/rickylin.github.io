<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>使用 CommandLineApplication 类创建专业的控制台程序 | Ricky Lin</title>
  <meta name="author" content="Ricky Lin">
  
  <meta name="description" content="在 .NET Core 里使用 `CommandLineApplication` 创建专业的控制台程序">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="使用 CommandLineApplication 类创建专业的控制台程序"/>
  <meta property="og:site_name" content="Ricky Lin"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
    <script src="/js/marked.js"></script>
    <script src="/js/comment.js"></script>
    <script src="/js/timeago.min.js"></script>
    <script src="/js/highlight.min.js"></script>
	<script src="/js/spin.min.js"></script>
  
  <!-- analytics -->
  




  <script type="text/javascript">
    var sdkInstance="appInsightsSDK";window[sdkInstance]="appInsights";var aiName=window[sdkInstance],aisdk=window[aiName]||function(e){
      function n(e){t[e]=function(){var n=arguments;t.queue.push(function(){t[e].apply(t,n)})}}var t={config:e};t.initialize=!0;var i=document,a=window;setTimeout(function(){var n=i.createElement("script");n.src=e.url||"https://az416426.vo.msecnd.net/next/ai.2.min.js",i.getElementsByTagName("script")[0].parentNode.appendChild(n)});try{t.cookie=i.cookie}catch(e){}t.queue=[],t.version=2;for(var r=["Event","PageView","Exception","Trace","DependencyData","Metric","PageViewPerformance"];r.length;)n("track"+r.pop());n("startTrackPage"),n("stopTrackPage");var s="Track"+r[0];if(n("start"+s),n("stop"+s),n("setAuthenticatedUserContext"),n("clearAuthenticatedUserContext"),n("flush"),!(!0===e.disableExceptionTracking||e.extensionConfig&&e.extensionConfig.ApplicationInsightsAnalytics&&!0===e.extensionConfig.ApplicationInsightsAnalytics.disableExceptionTracking)){n("_"+(r="onerror"));var o=a[r];a[r]=function(e,n,i,a,s){var c=o&&o(e,n,i,a,s);return!0!==c&&t["_"+r]({message:e,url:n,lineNumber:i,columnNumber:a,error:s}),c},e.autoExceptionInstrumented=!0}return t
      }({
          instrumentationKey:"728568e9-6aa0-4b28-9466-4ba46620ade0"
      });
    
    window[aiName]=aisdk,aisdk.queue&&0===aisdk.queue.length&&aisdk.trackPageView({});
  </script>


<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Ricky Lin</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/HelpfulLinks" title="Helpful links gathered from the Internet.">
			  <i class="fa fa-link"></i>Helpful Links
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      


	
		<div class="page-header page-header-inverse ">		
			<h1 class="title title-inverse "> 使用 CommandLineApplication 类创建专业的控制台程序</h1>
		</div>		
	






<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  
		 <div class="alert alert-success description">
			<i class="fa fa-info-circle"></i> <p>在 .NET Core 里使用 <code>CommandLineApplication</code> 创建专业的控制台程序</p>
			
		 </div> <!-- alert -->
	  		

	  <h1 id="闲话"><a href="#闲话" class="headerlink" title="闲话"></a>闲话</h1><p>在很久很久以前，电脑是命令行/终端/控制台的天下，那屏幕上的光标在行云流水般的键盘敲击下欢快地飞跃着，那一行行的字符输出唰唰唰地滚动着……直到 Windows 95 的出现（那时候我还不知道苹果电脑和它的操作系统），我的鼠标终于不再召灰，开始有了用武之地，然后就是 GUI 的天下……</p>
<p>然而世事就是这样，锦绣繁华之后就开始返璞归真，大鱼大肉太多就向往点粗茶淡饭，开车开久了就怀念起自行车，GUI 充斥的 Windows 的世界里似乎也开始挂起一阵控制台的清风。毕竟，一旦你熟悉了各种命令和参数，敲键盘的速度还是胜过鼠标的，只是现在的人都太懒或者太忙，总是宁愿牺牲效率而不愿意去多记一点东西。</p>
<p>我个人还是很喜欢命令行的，尤其是远程访问一个系统的时候，一个简单的 ssh 命令直接登录到远程 Linux,一个简单的 scp 命令就可以互相传输文件，这种便利、快捷是 Windows 远程桌面所无法比拟的。GUI 也许是 Windows 的设计哲学， 做什么事情都要靠 GUI。 没错，这大大降低了各种操作门槛，但是作为一个程序员，GUI 工具并非总是最佳选择，但除了 GUI 工具，替代选择并不多——直到 .NET Core 的出现。</p>
<h1 id="专业的控制台程序"><a href="#专业的控制台程序" class="headerlink" title="专业的控制台程序"></a>专业的控制台程序</h1><p>首先我们要有个标准，怎样才算“专业的控制台程序”？</p>
<p>平常无论是写着玩还是工作需要，我都做过一些控制台程序，在启动参数的传入、解析和执行上都比较随意，类似 <code>MyProgram abc 123</code> 这样，<code>MyProgram</code> 是程序名，<code>abc</code>、<code>123</code> 是参数值，内部直接用 <code>args[0]</code>、<code>args[1]</code>取得参数值并使用。仅此而已。时间长了，自己都搞不懂每个参数什么意思，参数有哪些有效值，都得查源代码才知道，每个参数的顺序也很重要，颠倒不得。而内部实现上，至少是 <code>Main</code> 方法里是典型的面条式代码。由此可见，我的这些控制台程序，无论是外在，还是内在，都业余得很。</p>
<p>那一个专业的控制台程序应该是什么样的呢？</p>
<h2 id="完善的帮助信息"><a href="#完善的帮助信息" class="headerlink" title="完善的帮助信息"></a>完善的帮助信息</h2><p>当你面对一个陌生的命令行程序，或者重新面对你自己2个月之前写的命令行程序，你心里第一反应会是什么呢？让我猜猜，你的第一反应一定是“这货到底怎么用？”（不要告诉我我猜错了，我不相信<span class="github-emoji" style="display:inline;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4a2.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a2.png?v8">💢</span>），下一个想法就是这个程序能告诉我用法就好了。一个专业的控制台程序必然会满足你的这个需要——它可以提供完善的帮助信息。比如 git:</p>
<p><img src="git_help.png" alt="git"></p>
<p>有了这些帮助信息，我们自然信心倍增，心里有谱多了。</p>
<p>我希望我写的控制台程序也能做到这点！</p>
<h2 id="符合“国际惯例”的调用方式"><a href="#符合“国际惯例”的调用方式" class="headerlink" title="符合“国际惯例”的调用方式"></a>符合“国际惯例”的调用方式</h2><p>如果你留意一下 Linux 平台下的一众控制台程序，你会发现他们的参数组织和调用方式十分类似，这种约定俗成的“国际惯例”十分有助于降低熟悉各个控制台程序的学习成本。</p>
<p>我们还是以 git 为例，从上面的截图可以看出，它有非常多的参数可用。虽然都是参数，但根据作用不同，可以分为 command, argument, option 三类。我不是控制台程序达人，对这3类参数的区别与联系还在深入理解、学习中。目前的理解是（以 git 为例）：</p>
<ul>
<li><p>command</p>
<p>  一个复杂的控制台程序可以提供多个子命令，而 command 就代表这些子命令</p>
<p>  比如 <code>clone</code>，<code>init</code></p>
</li>
<li><p>argument</p>
<p>  是一个 command 需要的参数。</p>
<p>  比如执行 <code>clone</code> 的时候需要指定一个 repository 的地址，这个地址就是一个 <code>argument</code>。</p>
</li>
<li><p>option</p>
<p>  调整 command 的行为。</p>
<p>  比如对于 <code>clone</code> 可以增加 <code>--verbose</code> 参数使其输出更详尽的信息。</p>
<p>  通常以两个短横线开头后跟参数名，比如 <code>--verbose</code>，对于常用的 option 还会有简写形式，就是一个短横线后跟简写形式的参数名，比如 <code>--verbose</code> 支持简写形式 <code>-v</code>，在帮助里通常以 <code>--verbose, -v</code> 或者 <code>--verbose|-v</code> 的形式说明。</p>
<p>  option 可以有值也可以没有值，有值的时候，其赋值方式不一而足，常见的有用空格的 <code>--branch dev</code>，用等号的（注意等号两边没有空格） <code>--branch=dev</code>，用冒号的（冒号两边没有空格） <code>--branch:dev</code></p>
</li>
</ul>
<p>对于相对简单的控制台程序，可能只有 argument 和 option 而并不包括 command。</p>
<p>看看那些有名的控制台程序，基本上也都遵循这个套路。在这方面，我不想做个怪胎，所以，我希望我写的控制台程序也能遵照这些“国际惯例”！</p>
<h2 id="易于维护的内部实现"><a href="#易于维护的内部实现" class="headerlink" title="易于维护的内部实现"></a>易于维护的内部实现</h2><p>在控制台程序的内部实现上，以前的做法非常简单粗暴，用一堆 <code>if</code> 或者 <code>switch</code> 配合各种 <code>&amp;&amp;</code> 和 <code>||</code> 成功地做到了一开始只有“上帝”和我明白，1个月后只有“上帝”明白的效果。随着程序参数增多、逻辑越来越复杂，这么搞下去，“上帝”依然可以很潇洒，我会被搞死的。为了不让我变成秃头，为了我可以有更多的时间玩游戏，控制台程序的内部实现必须井井有条、易于维护！</p>
<h1 id="问题来了"><a href="#问题来了" class="headerlink" title="问题来了"></a>问题来了</h1><p>了解了一个专业的控制台程序应具备的素质，那么接下来有一个问题萦绕在我心头久久不肯散去……</p>
<p><img src="how.jpg" alt="HOW"></p>
<p>作为一个小白，要实现一个有详细说明信息、调用方式符合“国际惯例”、还能优雅地处理各种参数的控制台程序何其困难？而如此套路化的东西难道没有一套成型的东西供参考吗？</p>
<p><img src="so_hard.jpg" alt="人生为何如此艰难"></p>
<h1 id="CommandLineApplication"><a href="#CommandLineApplication" class="headerlink" title="CommandLineApplication"></a>CommandLineApplication</h1><p>天无绝人之路，一次偶然的邂逅，遇到了它—— <strong>CommandLineApplication</strong>。如果你用 .NET Core 的话，它可以在你构建专业控制台程序的路上助你一臂之力。</p>
<p>它全名是 <code>Microsoft.Extensions.CommandLineUtils.CommandLineApplication</code>，家住 GitHub 省 aspnet 市 Common 区 src 路 Microsoft.Extensions.CommandLineUtils 大院 CommandLine 室.如果你路盲，这里有个<a href="https://github.com/aspnet/Common/blob/dev/src/Microsoft.Extensions.CommandLineUtils/CommandLine/CommandLineApplication.cs" target="_blank" rel="noopener">传送门</a>。</p>
<h2 id="实践是检验真理的唯一标准-MathForKids-程序"><a href="#实践是检验真理的唯一标准-MathForKids-程序" class="headerlink" title="实践是检验真理的唯一标准 - MathForKids 程序"></a>实践是检验真理的唯一标准 - MathForKids 程序</h2><p>让我们从头开始，利用 dotnet cli 和 Visual Studio Code 亲自体验一下它到底有多强大。我们将创建一个 MathForKids 程序，它可以根据参数输出一些加减乘除的算式，让孩子算算结果。</p>
<h3 id="MathForKids-程序的功能"><a href="#MathForKids-程序的功能" class="headerlink" title="MathForKids 程序的功能"></a>MathForKids 程序的功能</h3><ul>
<li><p>它只输出算式，所以我们不要搞得太复杂，不需要什么子命令 command。</p>
<p>  想了解带 command 的用法，可以参考本文最后附上的 CommandLineApplication 的官方测试代码 <span class="github-emoji" style="display:inline;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f61b.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f61b.png?v8">😛</span></p>
</li>
<li><p>它在执行的时候需要指定输出的算式是加、减、乘、除还是这4种运算符的组合，因此我们可以设置一个 argument: <code>operator</code>.</p>
<p>  这个 argument 可以允许同时设置多个值。 </p>
</li>
<li><p>它可以设置生成的数字的最大值和最小值，因为它们只是调整输出的算式种数字的大小，因此我将其归为 options: <code>minValue</code>, <code>maxValue</code></p>
<p>  <code>minValue</code> 的默认值是0</p>
<p>  <code>maxValue</code> 的默认值是100</p>
</li>
<li><p>它可以设置生成的算式个数，这也只是调整输出结果，因此我也将其归为 option: <code>count</code></p>
<p>  <code>count</code> 的默认值是 10</p>
</li>
</ul>
<h3 id="MathForKids-程序的用法"><a href="#MathForKids-程序的用法" class="headerlink" title="MathForKids 程序的用法"></a>MathForKids 程序的用法</h3><p>在我们看代码之前，先看看这个程序用起来应该是什么样的。</p>
<p><em>注意：在本文发布之时，.NET Core 处于 RC 2 阶段，还不支持编译为本地可执行文件。所以目前必须使用 <code>dotnet MathForKids.dll</code> 来运行。图中红色下划线表示输入的命令</em></p>
<p>首先，它可以提供帮助信息：</p>
<p><img src="MathForKids_Help.png" alt="MathForKids 帮助信息"></p>
<p>从帮助信息中我们可以看到它支持的所有参数，并且支持参数的全写和简写，比如我们可以写 <code>--minValue</code> 也可以简写为 <code>-min</code>。</p>
<p>当我们调用它只生成加法和乘法，其它选项默认时：</p>
<p><img src="MathForKids_Default.png" alt="MathForKids 使用默认 option 调用"></p>
<p><strong>注意，我们一次传入了多个参数： <code>加 乘</code>。</strong></p>
<p>当我们设置一些 option 来改变输出结果时：</p>
<p><img src="MathForKids_WithOptions.png" alt="MathForKids 传入多个 options"></p>
<p><strong>注意，这里演示了使用全写和简写添加 option 以及以多种方式赋值（使用冒号、等号和空格）。</strong></p>
<p>以上使用方法看起来是不是有点“专业”的味道了？</p>
<h2 id="Show-me-the-code"><a href="#Show-me-the-code" class="headerlink" title="Show me the code"></a>Show me the code</h2><p>为了使用 <code>CommandLineApplication</code> 类，我们需要添加对 <code>Microsoft.Extensions.CommandLineUtils</code> 的引用：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0-*"</span>,</span><br><span class="line">  <span class="attr">"buildOptions"</span>: {</span><br><span class="line">    <span class="attr">"emitEntryPoint"</span>: <span class="literal">true</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">"dependencies"</span>: {</span><br><span class="line">    <span class="attr">"Microsoft.NETCore.App"</span>: {</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"platform"</span>,</span><br><span class="line">      <span class="attr">"version"</span>: <span class="string">"1.0.0-rc2-3002702"</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">"Microsoft.Extensions.CommandLineUtils"</span>: <span class="string">"1.0.0-rc2-final"</span> <span class="comment">//&lt;--- add this dependency</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">"frameworks"</span>: {</span><br><span class="line">    <span class="attr">"netcoreapp1.0"</span>: {</span><br><span class="line">      <span class="attr">"imports"</span>: <span class="string">"dnxcore50"</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>这是 MathForKids 程序的主体部分，说明都在注释里：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.CommandLineUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApplication</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        {</span><br><span class="line">            CommandLineApplication app = <span class="keyword">new</span> CommandLineApplication();</span><br><span class="line">            app.HelpOption(<span class="string">"--help|-h|-?"</span>); <span class="comment">// 使其支持显示帮助信息</span></span><br><span class="line">            app.VersionOption(<span class="string">"--version|-v"</span>, <span class="string">"1.0.0"</span>); <span class="comment">// 使其支持显示版本信息。为了简化起见，直接返回静态的 1.0.0</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 添加 argument，这里我们允许传入这个 argument 的多个值。</span></span><br><span class="line">            CommandArgument argOperator = app.Argument(<span class="string">"operator"</span>, <span class="string">"算式类型，有效值：加、减、乘、除，可以设置多个类型"</span>, multipleValues: <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 添加多个 options，注意设置全写和简写的方式，很简单。这应该是基于约定的解析处理方式。</span></span><br><span class="line">            CommandOption optMin = app.Option(<span class="string">"--minValue -min &lt;value&gt;"</span>, <span class="string">"最小值，默认为0"</span>, CommandOptionType.SingleValue);</span><br><span class="line">            CommandOption optMax = app.Option(<span class="string">"--maxValue -max &lt;value&gt;"</span>, <span class="string">"最大值，默认为100"</span>, CommandOptionType.SingleValue);</span><br><span class="line">            CommandOption optCount = app.Option(<span class="string">"--count -c &lt;value&gt;"</span>, <span class="string">"生成的算式数量，默认为10"</span>, CommandOptionType.SingleValue);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 传入一个委托方法，当下面的 Execute 执行后会执行我们的委托方法，完成我们需要处理的工作。 委托方法需要返回一个 int，反映执行结果，一如经典的控制台程序需要的那样。</span></span><br><span class="line">            app.OnExecute(() =&gt;</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">return</span> OnAppExecute(argOperator, optMin, optMax, optCount);</span><br><span class="line">            });</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 开始执行，把控制台传入的参数直接传递给 CommandLineApplication。</span></span><br><span class="line">            app.Execute(args);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">OnAppExecute</span>(<span class="params">CommandArgument argOperator, CommandOption optMin, CommandOption optMax, CommandOption optCount</span>)</span></span><br><span class="line"><span class="function"></span>        {</span><br><span class="line">            <span class="comment">// 此处省略 100 行以示例取代</span></span><br><span class="line">            List&lt;<span class="keyword">string</span>&gt; operators = argOperator.Values;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">string</span> max;</span><br><span class="line">            <span class="keyword">if</span>(optMax.HasValue())</span><br><span class="line">                max = optMax.Value();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>CommandArgument</code> 和 <code>CommandOption</code> 的使用非常简单，有 <code>HasValue</code> 和 <code>Value</code> 等方法可以判断和取值。</p>
<p>所有代码放在我的 <a href="https://github.com/RickyLin/Demos/tree/master/MathForKids" target="_blank" rel="noopener">GitHub</a> 里。</p>
<p>官方的<a href="https://github.com/aspnet/Common/blob/master/test/Microsoft.Extensions.CommandLineUtils.Tests/CommandLineApplicationTests.cs" target="_blank" rel="noopener">测试类</a>也是一个很好的参考资源。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>	  
	</div>

	<!-- recommended posts -->
	

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2016/06/21/FindAndDeleteFilesInOsX/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一页</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2014/07/29/zai-shu-ru-shi-zi-dong-ge-shi-hua-dian-hua-hao-ma/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>

    <!-- share -->
    
        

        

    
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>
    	 
	 <div id="comment-thread"></div>
	 <div id="loading-spin"></div>
	 <script type="text/javascript">
	   getComments({
           type: "github" ? "github" : "github",       
	       user: "rickylin",
	       repo: "BlogComments",
		   client_id: "c345ccb22c518a9ffba5",
           client_secret: "65b82b6548d7c441725ba6b0dd18476ab4cc8cf1",
		   no_comment: "暂时还没有留言呢，点击下面的按钮去留言吧！",
		   go_to_comment: "去留言",
		   no_issue: "no_issue",
		   issue_title: "使用 CommandLineApplication 类创建专业的控制台程序",
		   issue_id: "",
		   btn_class: "btn btn-primary",
		   comments_target: "#comment-thread",
		   loading_target: "#loading_spin"
		   });
	 </script>
  
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2016-06-15 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/NET-Core/">.NET-Core<span>8</span></a></li>
    </ul>
	</div>
	

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->



    </div>
  </div>
  <div class="container-narrow">
    <footer> <div>
  <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
    <img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
  </a>
  <br />
  本作品采用<a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
</div>
<div>
  &copy; 2020 Ricky Lin
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/" target="_blank" rel="noopener">Freemind</a>.    
  </div> </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




<!-- syntax highlighting -->

  <script>
  marked.setOptions({
    highlight: function (code, lang) {
        return hljs.highlightAuto(code).value;
    }
  });
  function Highlighting(){
    var markdowns = document.getElementsByClassName('markdown');
    for(var i=0;i<markdowns.length;i++){
        if(markdowns[i].innerHTML) markdowns[i].innerHTML =marked(markdowns[i].innerHTML);
    }
  }
  window.addEventListener('DOMContentLoaded', Highlighting, false);
  window.addEventListener('load', Highlighting, false);
  </script>


</body>
</html>