<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 8 页 | Ricky Lin</title>
  <meta name="author" content="Ricky Lin">
  
  <meta name="description" content="这是 Ricky Lin 的博客站点">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Ricky Lin"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
    <script src="/js/marked.js"></script>
    <script src="/js/comment.js"></script>
    <script src="/js/timeago.min.js"></script>
    <script src="/js/highlight.min.js"></script>
	<script src="/js/spin.min.js"></script>
  
  <!-- analytics -->
  




  <script type="text/javascript">
    var sdkInstance="appInsightsSDK";window[sdkInstance]="appInsights";var aiName=window[sdkInstance],aisdk=window[aiName]||function(e){
      function n(e){t[e]=function(){var n=arguments;t.queue.push(function(){t[e].apply(t,n)})}}var t={config:e};t.initialize=!0;var i=document,a=window;setTimeout(function(){var n=i.createElement("script");n.src=e.url||"https://az416426.vo.msecnd.net/next/ai.2.min.js",i.getElementsByTagName("script")[0].parentNode.appendChild(n)});try{t.cookie=i.cookie}catch(e){}t.queue=[],t.version=2;for(var r=["Event","PageView","Exception","Trace","DependencyData","Metric","PageViewPerformance"];r.length;)n("track"+r.pop());n("startTrackPage"),n("stopTrackPage");var s="Track"+r[0];if(n("start"+s),n("stop"+s),n("setAuthenticatedUserContext"),n("clearAuthenticatedUserContext"),n("flush"),!(!0===e.disableExceptionTracking||e.extensionConfig&&e.extensionConfig.ApplicationInsightsAnalytics&&!0===e.extensionConfig.ApplicationInsightsAnalytics.disableExceptionTracking)){n("_"+(r="onerror"));var o=a[r];a[r]=function(e,n,i,a,s){var c=o&&o(e,n,i,a,s);return!0!==c&&t["_"+r]({message:e,url:n,lineNumber:i,columnNumber:a,error:s}),c},e.autoExceptionInstrumented=!0}return t
      }({
          instrumentationKey:"728568e9-6aa0-4b28-9466-4ba46620ade0"
      });
    
    window[aiName]=aisdk,aisdk.queue&&0===aisdk.queue.length&&aisdk.trackPageView({});
  </script>


<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Ricky Lin</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/HelpfulLinks" title="Helpful links gathered from the Internet.">
			  <i class="fa fa-link"></i>Helpful Links
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">学无止境</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      理解得越多，需要记忆的越少
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
        <!-- render top articles firstly -->
        
        <!-- render other articles -->
        
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-09-06 </div>
			<div class="article-title"><a href="/2016/09/06/time-zone-id-differences-between-windows-and-os-x-linux/" >TimeZoneId 在 Windows 和 非Windows 平台下值不同</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>自从 .NET Core 跨平台以来，终于可以在我的 Mac OS 系统里愉快地开发了，但是遇到一个很无奈的问题：对于同一个时区，<code>TimeZoneInfo</code>的<code>Id</code>属性值在 Windows 平台下和在 Mac OS/Linux 平台下的值是不同的。</p>
<p>比如如下代码：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine(TimeZoneInfo.Local.Id);</span><br></pre></td></tr></tbody></table></figure>

<p>在 Mac OS/Linux 里结果是：<code>Asia/Shanghai</code>.</p>
<p>在 Windows 里结果是：<code>China Standard Time</code>.</p>
<p>而我们系统里作为用户时区首选项保存的都是 Windows 下的时区 Id 值，所以在 Mac OS 下通过时区 Id 获取<code>TimeZoneInfo</code>的方法就悲剧了：“The time zone ID ‘China Standard Time’ was not found on the local computer”</p>
<p>这个跨平台的小坑怎么填？暂时没有好办法，只能想方设法建立两个平台下的时区 Id 对照表。那么对照信息从哪里来呢？不要愁，<a href="http://www.unicode.org/cldr/charts/latest/supplemental/zone_tzid.html" target="_blank" rel="noopener">unicode.org</a> 上就有！两个平台的值可以通过 TZID 对应上。</p>
<p>这里再附上我创建的针对 Sql Server 的 TimeZoneInfo 表脚本</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> ANSI_NULLS <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">SET</span> QUOTED_IDENTIFIER <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">SET</span> ANSI_PADDING <span class="keyword">ON</span></span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> sys.objects <span class="keyword">WHERE</span> object_id = OBJECT_ID(N<span class="string">'[dbo].[TimeZoneInfo]'</span>) <span class="keyword">AND</span> <span class="keyword">type</span> <span class="keyword">in</span> (N<span class="string">'U'</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [dbo].[TimeZoneInfo](</span><br><span class="line">	[TimeZoneId] [<span class="built_in">varchar</span>](<span class="number">128</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">	[LinuxTimeZoneId] [<span class="built_in">varchar</span>](<span class="number">256</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">	[DisplayName] [<span class="built_in">varchar</span>](<span class="number">256</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">	[BaseUtcOffsetMinutes] [<span class="built_in">int</span>] <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"> <span class="keyword">CONSTRAINT</span> [PK_TimeZoneInfo] PRIMARY <span class="keyword">KEY</span> CLUSTERED </span><br><span class="line">(</span><br><span class="line">	[TimeZoneId] <span class="keyword">ASC</span></span><br><span class="line">)<span class="keyword">WITH</span> (PAD_INDEX = <span class="keyword">OFF</span>, STATISTICS_NORECOMPUTE = <span class="keyword">OFF</span>, IGNORE_DUP_KEY = <span class="keyword">OFF</span>, ALLOW_ROW_LOCKS = <span class="keyword">ON</span>, ALLOW_PAGE_LOCKS = <span class="keyword">ON</span>) <span class="keyword">ON</span> [PRIMARY]</span><br><span class="line">) <span class="keyword">ON</span> [PRIMARY]</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">SET</span> ANSI_PADDING <span class="keyword">OFF</span></span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Afghanistan Standard Time'</span>, N<span class="string">'Asia/Kabul'</span>, N<span class="string">'(UTC+04:30) Kabul'</span>, <span class="number">270</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Alaskan Standard Time'</span>, N<span class="string">'America/Anchorage'</span>, N<span class="string">'(UTC-09:00) Alaska'</span>, <span class="number">-540</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Arab Standard Time'</span>, N<span class="string">'Asia/Riyadh'</span>, N<span class="string">'(UTC+03:00) Kuwait, Riyadh'</span>, <span class="number">180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Arabian Standard Time'</span>, N<span class="string">'Asia/Dubai'</span>, N<span class="string">'(UTC+04:00) Abu Dhabi, Muscat'</span>, <span class="number">240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Arabic Standard Time'</span>, N<span class="string">'Asia/Baghdad'</span>, N<span class="string">'(UTC+03:00) Baghdad'</span>, <span class="number">180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Argentina Standard Time'</span>, N<span class="string">'America/Buenos_Aires'</span>, N<span class="string">'(UTC-03:00) Buenos Aires'</span>, <span class="number">-180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Atlantic Standard Time'</span>, N<span class="string">'America/Halifax'</span>, N<span class="string">'(UTC-04:00) Atlantic Time (Canada)'</span>, <span class="number">-240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'AUS Central Standard Time'</span>, N<span class="string">'Australia/Darwin'</span>, N<span class="string">'(UTC+09:30) Darwin'</span>, <span class="number">570</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'AUS Eastern Standard Time'</span>, N<span class="string">'Australia/Sydney'</span>, N<span class="string">'(UTC+10:00) Canberra, Melbourne, Sydney'</span>, <span class="number">600</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Azerbaijan Standard Time'</span>, N<span class="string">'Asia/Baku'</span>, N<span class="string">'(UTC+04:00) Baku'</span>, <span class="number">240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Azores Standard Time'</span>, N<span class="string">'Atlantic/Azores'</span>, N<span class="string">'(UTC-01:00) Azores'</span>, <span class="number">-60</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Bahia Standard Time'</span>, N<span class="string">'America/Bahia'</span>, N<span class="string">'(UTC-03:00) Salvador'</span>, <span class="number">-180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Bangladesh Standard Time'</span>, N<span class="string">'Asia/Dhaka'</span>, N<span class="string">'(UTC+06:00) Dhaka'</span>, <span class="number">360</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Belarus Standard Time'</span>, N<span class="string">'Europe/Minsk'</span>, N<span class="string">'(UTC+03:00) Minsk'</span>, <span class="number">180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Canada Central Standard Time'</span>, N<span class="string">'America/Regina'</span>, N<span class="string">'(UTC-06:00) Saskatchewan'</span>, <span class="number">-360</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Cape Verde Standard Time'</span>, N<span class="string">'Atlantic/Cape_Verde'</span>, N<span class="string">'(UTC-01:00) Cabo Verde Is.'</span>, <span class="number">-60</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Caucasus Standard Time'</span>, N<span class="string">'Asia/Yerevan'</span>, N<span class="string">'(UTC+04:00) Yerevan'</span>, <span class="number">240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Cen. Australia Standard Time'</span>, N<span class="string">'Australia/Adelaide'</span>, N<span class="string">'(UTC+09:30) Adelaide'</span>, <span class="number">570</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Central America Standard Time'</span>, N<span class="string">'America/Guatemala'</span>, N<span class="string">'(UTC-06:00) Central America'</span>, <span class="number">-360</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Central Asia Standard Time'</span>, N<span class="string">'Asia/Almaty'</span>, N<span class="string">'(UTC+06:00) Astana'</span>, <span class="number">360</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Central Brazilian Standard Time'</span>, N<span class="string">'America/Cuiaba'</span>, N<span class="string">'(UTC-04:00) Cuiaba'</span>, <span class="number">-240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Central Europe Standard Time'</span>, N<span class="string">'Europe/Budapest'</span>, N<span class="string">'(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague'</span>, <span class="number">60</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Central European Standard Time'</span>, N<span class="string">'Europe/Warsaw'</span>, N<span class="string">'(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb'</span>, <span class="number">60</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Central Pacific Standard Time'</span>, N<span class="string">'Pacific/Guadalcanal'</span>, N<span class="string">'(UTC+11:00) Solomon Is., New Caledonia'</span>, <span class="number">660</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Central Standard Time'</span>, N<span class="string">'America/Chicago'</span>, N<span class="string">'(UTC-06:00) Central Time (US &amp; Canada)'</span>, <span class="number">-360</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Central Standard Time (Mexico)'</span>, N<span class="string">'America/Mexico_City'</span>, N<span class="string">'(UTC-06:00) Guadalajara, Mexico City, Monterrey'</span>, <span class="number">-360</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'China Standard Time'</span>, N<span class="string">'Asia/Shanghai'</span>, N<span class="string">'(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi'</span>, <span class="number">480</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Dateline Standard Time'</span>, N<span class="string">'Etc/GMT+12'</span>, N<span class="string">'(UTC-12:00) International Date Line West'</span>, <span class="number">-720</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'E. Africa Standard Time'</span>, N<span class="string">'Africa/Nairobi'</span>, N<span class="string">'(UTC+03:00) Nairobi'</span>, <span class="number">180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'E. Australia Standard Time'</span>, N<span class="string">'Australia/Brisbane'</span>, N<span class="string">'(UTC+10:00) Brisbane'</span>, <span class="number">600</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'E. Europe Standard Time'</span>, N<span class="string">'Europe/Chisinau'</span>, N<span class="string">'(UTC+02:00) E. Europe'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'E. South America Standard Time'</span>, N<span class="string">'America/Sao_Paulo'</span>, N<span class="string">'(UTC-03:00) Brasilia'</span>, <span class="number">-180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Eastern Standard Time'</span>, N<span class="string">'America/New_York'</span>, N<span class="string">'(UTC-05:00) Eastern Time (US &amp; Canada)'</span>, <span class="number">-300</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Egypt Standard Time'</span>, N<span class="string">'Africa/Cairo'</span>, N<span class="string">'(UTC+02:00) Cairo'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Ekaterinburg Standard Time'</span>, N<span class="string">'Asia/Yekaterinburg'</span>, N<span class="string">'(UTC+05:00) Ekaterinburg (RTZ 4)'</span>, <span class="number">300</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Fiji Standard Time'</span>, N<span class="string">'Pacific/Fiji'</span>, N<span class="string">'(UTC+12:00) Fiji'</span>, <span class="number">720</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'FLE Standard Time'</span>, N<span class="string">'Europe/Kiev'</span>, N<span class="string">'(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Georgian Standard Time'</span>, N<span class="string">'Asia/Tbilisi'</span>, N<span class="string">'(UTC+04:00) Tbilisi'</span>, <span class="number">240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'GMT Standard Time'</span>, N<span class="string">'Europe/London'</span>, N<span class="string">'(UTC) Dublin, Edinburgh, Lisbon, London'</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Greenland Standard Time'</span>, N<span class="string">'America/Godthab'</span>, N<span class="string">'(UTC-03:00) Greenland'</span>, <span class="number">-180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Greenwich Standard Time'</span>, N<span class="string">'Atlantic/Reykjavik'</span>, N<span class="string">'(UTC) Monrovia, Reykjavik'</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'GTB Standard Time'</span>, N<span class="string">'Europe/Bucharest'</span>, N<span class="string">'(UTC+02:00) Athens, Bucharest'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Hawaiian Standard Time'</span>, N<span class="string">'Pacific/Honolulu'</span>, N<span class="string">'(UTC-10:00) Hawaii'</span>, <span class="number">-600</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'India Standard Time'</span>, N<span class="string">'Asia/Calcutta'</span>, N<span class="string">'(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi'</span>, <span class="number">330</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Iran Standard Time'</span>, N<span class="string">'Asia/Tehran'</span>, N<span class="string">'(UTC+03:30) Tehran'</span>, <span class="number">210</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Israel Standard Time'</span>, N<span class="string">'Asia/Jerusalem'</span>, N<span class="string">'(UTC+02:00) Jerusalem'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Jordan Standard Time'</span>, N<span class="string">'Asia/Amman'</span>, N<span class="string">'(UTC+02:00) Amman'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Kaliningrad Standard Time'</span>, N<span class="string">'Europe/Kaliningrad'</span>, N<span class="string">'(UTC+02:00) Kaliningrad (RTZ 1)'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Kamchatka Standard Time'</span>, N<span class="string">''</span>, N<span class="string">'(UTC+12:00) Petropavlovsk-Kamchatsky - Old'</span>, <span class="number">720</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Korea Standard Time'</span>, N<span class="string">'Asia/Seoul'</span>, N<span class="string">'(UTC+09:00) Seoul'</span>, <span class="number">540</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Libya Standard Time'</span>, N<span class="string">'Africa/Tripoli'</span>, N<span class="string">'(UTC+02:00) Tripoli'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Line Islands Standard Time'</span>, N<span class="string">'Pacific/Kiritimati'</span>, N<span class="string">'(UTC+14:00) Kiritimati Island'</span>, <span class="number">840</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Magadan Standard Time'</span>, N<span class="string">'Asia/Magadan'</span>, N<span class="string">'(UTC+10:00) Magadan'</span>, <span class="number">600</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Mauritius Standard Time'</span>, N<span class="string">'Indian/Mauritius'</span>, N<span class="string">'(UTC+04:00) Port Louis'</span>, <span class="number">240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Mid-Atlantic Standard Time'</span>, N<span class="string">''</span>, N<span class="string">'(UTC-02:00) Mid-Atlantic - Old'</span>, <span class="number">-120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Middle East Standard Time'</span>, N<span class="string">'Asia/Beirut'</span>, N<span class="string">'(UTC+02:00) Beirut'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Montevideo Standard Time'</span>, N<span class="string">'America/Montevideo'</span>, N<span class="string">'(UTC-03:00) Montevideo'</span>, <span class="number">-180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Morocco Standard Time'</span>, N<span class="string">'Africa/Casablanca'</span>, N<span class="string">'(UTC) Casablanca'</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Mountain Standard Time'</span>, N<span class="string">'America/Denver'</span>, N<span class="string">'(UTC-07:00) Mountain Time (US &amp; Canada)'</span>, <span class="number">-420</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Mountain Standard Time (Mexico)'</span>, N<span class="string">'America/Chihuahua'</span>, N<span class="string">'(UTC-07:00) Chihuahua, La Paz, Mazatlan'</span>, <span class="number">-420</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Myanmar Standard Time'</span>, N<span class="string">'Asia/Rangoon'</span>, N<span class="string">'(UTC+06:30) Yangon (Rangoon)'</span>, <span class="number">390</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'N. Central Asia Standard Time'</span>, N<span class="string">'Asia/Novosibirsk'</span>, N<span class="string">'(UTC+06:00) Novosibirsk (RTZ 5)'</span>, <span class="number">360</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Namibia Standard Time'</span>, N<span class="string">'Africa/Windhoek'</span>, N<span class="string">'(UTC+01:00) Windhoek'</span>, <span class="number">60</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Nepal Standard Time'</span>, N<span class="string">'Asia/Katmandu'</span>, N<span class="string">'(UTC+05:45) Kathmandu'</span>, <span class="number">345</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'New Zealand Standard Time'</span>, N<span class="string">'Pacific/Auckland'</span>, N<span class="string">'(UTC+12:00) Auckland, Wellington'</span>, <span class="number">720</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Newfoundland Standard Time'</span>, N<span class="string">'America/St_Johns'</span>, N<span class="string">'(UTC-03:30) Newfoundland'</span>, <span class="number">-210</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'North Asia East Standard Time'</span>, N<span class="string">'Asia/Irkutsk'</span>, N<span class="string">'(UTC+08:00) Irkutsk (RTZ 7)'</span>, <span class="number">480</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'North Asia Standard Time'</span>, N<span class="string">'Asia/Krasnoyarsk'</span>, N<span class="string">'(UTC+07:00) Krasnoyarsk (RTZ 6)'</span>, <span class="number">420</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Pacific SA Standard Time'</span>, N<span class="string">'America/Santiago'</span>, N<span class="string">'(UTC-04:00) Santiago'</span>, <span class="number">-240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Pacific Standard Time'</span>, N<span class="string">'America/Los_Angeles'</span>, N<span class="string">'(UTC-08:00) Pacific Time (US &amp; Canada)'</span>, <span class="number">-480</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Pacific Standard Time (Mexico)'</span>, N<span class="string">''</span>, N<span class="string">'(UTC-08:00) Baja California'</span>, <span class="number">-480</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Pakistan Standard Time'</span>, N<span class="string">'Asia/Karachi'</span>, N<span class="string">'(UTC+05:00) Islamabad, Karachi'</span>, <span class="number">300</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Paraguay Standard Time'</span>, N<span class="string">'America/Asuncion'</span>, N<span class="string">'(UTC-04:00) Asuncion'</span>, <span class="number">-240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Romance Standard Time'</span>, N<span class="string">'Europe/Paris'</span>, N<span class="string">'(UTC+01:00) Brussels, Copenhagen, Madrid, Paris'</span>, <span class="number">60</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Russia Time Zone 10'</span>, N<span class="string">'Asia/Srednekolymsk'</span>, N<span class="string">'(UTC+11:00) Chokurdakh (RTZ 10)'</span>, <span class="number">660</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Russia Time Zone 11'</span>, N<span class="string">'Asia/Kamchatka'</span>, N<span class="string">'(UTC+12:00) Anadyr, Petropavlovsk-Kamchatsky (RTZ 11)'</span>, <span class="number">720</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Russia Time Zone 3'</span>, N<span class="string">'Europe/Samara'</span>, N<span class="string">'(UTC+04:00) Izhevsk, Samara (RTZ 3)'</span>, <span class="number">240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Russian Standard Time'</span>, N<span class="string">'Europe/Moscow'</span>, N<span class="string">'(UTC+03:00) Moscow, St. Petersburg, Volgograd (RTZ 2)'</span>, <span class="number">180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'SA Eastern Standard Time'</span>, N<span class="string">'America/Cayenne'</span>, N<span class="string">'(UTC-03:00) Cayenne, Fortaleza'</span>, <span class="number">-180</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'SA Pacific Standard Time'</span>, N<span class="string">'America/Bogota'</span>, N<span class="string">'(UTC-05:00) Bogota, Lima, Quito, Rio Branco'</span>, <span class="number">-300</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'SA Western Standard Time'</span>, N<span class="string">'America/La_Paz'</span>, N<span class="string">'(UTC-04:00) Georgetown, La Paz, Manaus, San Juan'</span>, <span class="number">-240</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Samoa Standard Time'</span>, N<span class="string">'Pacific/Apia'</span>, N<span class="string">'(UTC+13:00) Samoa'</span>, <span class="number">780</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'SE Asia Standard Time'</span>, N<span class="string">'Asia/Bangkok'</span>, N<span class="string">'(UTC+07:00) Bangkok, Hanoi, Jakarta'</span>, <span class="number">420</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Singapore Standard Time'</span>, N<span class="string">'Asia/Singapore'</span>, N<span class="string">'(UTC+08:00) Kuala Lumpur, Singapore'</span>, <span class="number">480</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'South Africa Standard Time'</span>, N<span class="string">'Africa/Johannesburg'</span>, N<span class="string">'(UTC+02:00) Harare, Pretoria'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Sri Lanka Standard Time'</span>, N<span class="string">'Asia/Colombo'</span>, N<span class="string">'(UTC+05:30) Sri Jayawardenepura'</span>, <span class="number">330</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Syria Standard Time'</span>, N<span class="string">'Asia/Damascus'</span>, N<span class="string">'(UTC+02:00) Damascus'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Taipei Standard Time'</span>, N<span class="string">'Asia/Taipei'</span>, N<span class="string">'(UTC+08:00) Taipei'</span>, <span class="number">480</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Tasmania Standard Time'</span>, N<span class="string">'Australia/Hobart'</span>, N<span class="string">'(UTC+10:00) Hobart'</span>, <span class="number">600</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Tokyo Standard Time'</span>, N<span class="string">'Asia/Tokyo'</span>, N<span class="string">'(UTC+09:00) Osaka, Sapporo, Tokyo'</span>, <span class="number">540</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Tonga Standard Time'</span>, N<span class="string">'Pacific/Tongatapu'</span>, N<span class="string">'(UTC+13:00) Nuku''alofa'</span>, <span class="number">780</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Turkey Standard Time'</span>, N<span class="string">'Europe/Istanbul'</span>, N<span class="string">'(UTC+02:00) Istanbul'</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Ulaanbaatar Standard Time'</span>, N<span class="string">'Asia/Ulaanbaatar'</span>, N<span class="string">'(UTC+08:00) Ulaanbaatar'</span>, <span class="number">480</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'US Eastern Standard Time'</span>, N<span class="string">'America/Indianapolis'</span>, N<span class="string">'(UTC-05:00) Indiana (East)'</span>, <span class="number">-300</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'US Mountain Standard Time'</span>, N<span class="string">'America/Phoenix'</span>, N<span class="string">'(UTC-07:00) Arizona'</span>, <span class="number">-420</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'UTC'</span>, N<span class="string">'Etc/GMT'</span>, N<span class="string">'(UTC) Coordinated Universal Time'</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'UTC+12'</span>, N<span class="string">'Etc/GMT-12'</span>, N<span class="string">'(UTC+12:00) Coordinated Universal Time+12'</span>, <span class="number">720</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'UTC-02'</span>, N<span class="string">'Etc/GMT+2'</span>, N<span class="string">'(UTC-02:00) Coordinated Universal Time-02'</span>, <span class="number">-120</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'UTC-11'</span>, N<span class="string">'Etc/GMT+11'</span>, N<span class="string">'(UTC-11:00) Coordinated Universal Time-11'</span>, <span class="number">-660</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Venezuela Standard Time'</span>, N<span class="string">'America/Caracas'</span>, N<span class="string">'(UTC-04:30) Caracas'</span>, <span class="number">-270</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Vladivostok Standard Time'</span>, N<span class="string">'Asia/Vladivostok'</span>, N<span class="string">'(UTC+10:00) Vladivostok, Magadan (RTZ 9)'</span>, <span class="number">600</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'W. Australia Standard Time'</span>, N<span class="string">'Australia/Perth'</span>, N<span class="string">'(UTC+08:00) Perth'</span>, <span class="number">480</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'W. Central Africa Standard Time'</span>, N<span class="string">'Africa/Lagos'</span>, N<span class="string">'(UTC+01:00) West Central Africa'</span>, <span class="number">60</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'W. Europe Standard Time'</span>, N<span class="string">'Europe/Berlin'</span>, N<span class="string">'(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna'</span>, <span class="number">60</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'West Asia Standard Time'</span>, N<span class="string">'Asia/Tashkent'</span>, N<span class="string">'(UTC+05:00) Ashgabat, Tashkent'</span>, <span class="number">300</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'West Pacific Standard Time'</span>, N<span class="string">'Pacific/Port_Moresby'</span>, N<span class="string">'(UTC+10:00) Guam, Port Moresby'</span>, <span class="number">600</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br><span class="line"><span class="keyword">INSERT</span> [dbo].[TimeZoneInfo] ([TimeZoneId], [LinuxTimeZoneId], [DisplayName], [BaseUtcOffsetMinutes]) <span class="keyword">VALUES</span> (N<span class="string">'Yakutsk Standard Time'</span>, N<span class="string">'Asia/Yakutsk'</span>, N<span class="string">'(UTC+09:00) Yakutsk (RTZ 8)'</span>, <span class="number">540</span>)</span><br><span class="line"><span class="keyword">GO</span></span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
	
	</div>
  <a type="button" href="/2016/09/06/time-zone-id-differences-between-windows-and-os-x-linux/#more" class="btn btn-default more">阅读此文</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-07-21 </div>
			<div class="article-title"><a href="/2016/07/21/differences-when-formatting-number-with-n/" title="数值格式化字符“N”在Windows里保留2位小数，但是在Linux/Mac OS里保留3位小数">数值格式化字符“N”在Windows和Linux/Mac OS里结果不同</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>凭以往的经验，当我们需要把一个数值格式化为带千分符和2位小数的字符串时，<code>N</code>是个非常方便的格式化字符。</p>
<p>看一段非常简单的代码：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApplication</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        {</span><br><span class="line">            <span class="keyword">decimal</span> d = <span class="number">1234567.56789</span>m;</span><br><span class="line">            Console.WriteLine(<span class="string">"{0:N}"</span>, d);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>毫无疑问，我希望这段代码的输出为<code>1,234,567.57</code>，在 Windows 系统里结果的确如此，但是在 Linux/Mac OS 里，结果却是<code>1,234,567.568</code>，保留了3位小数，我真 (╯‵□′)╯︵┻━┻ </p>
<p>我猜这是 Linux/Mac OS 里的标准或者约定？如果真是这样的话，我就比较无奈了，为了让我们的项目无论在什么操作系统下都有一致的输出，要么不使用<code>N</code>，要么在 Windows 和 Linux/Mac OS 下使用不同的格式化字符，比如：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// using System.Runtime.InteropServices;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (RuntimeInformation.IsOSPlatform(OSPlatform.Windows))</span><br><span class="line">    Console.WriteLine(<span class="string">"{0:N}"</span>, d);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    Console.WriteLine(<span class="string">"{0:#,##0.00}"</span>, d);</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
	
	</div>
  <a type="button" href="/2016/07/21/differences-when-formatting-number-with-n/#more" class="btn btn-default more">阅读此文</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-06-21 </div>
			<div class="article-title"><a href="/2016/06/21/FindAndDeleteFilesInOsX/" >在 OS X 里查找并删除找到的文件</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>闲话休提且说正话，用下面这个命令查找并删除 当前目录和所有子目录里的 .DS_Store 文件：</p>
<p><code>find . -name .DS_Store -delete</code></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
	
	</div>
  <a type="button" href="/2016/06/21/FindAndDeleteFilesInOsX/#more" class="btn btn-default more">阅读此文</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2016-06-15 </div>
			<div class="article-title"><a href="/2016/06/15/TryOutCommandLineApplication/" title="在 .NET Core 里使用 `CommandLineApplication` 创建专业的控制台程序">使用 CommandLineApplication 类创建专业的控制台程序</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<h1 id="闲话"><a href="#闲话" class="headerlink" title="闲话"></a>闲话</h1><p>在很久很久以前，电脑是命令行/终端/控制台的天下，那屏幕上的光标在行云流水般的键盘敲击下欢快地飞跃着，那一行行的字符输出唰唰唰地滚动着……直到 Windows 95 的出现（那时候我还不知道苹果电脑和它的操作系统），我的鼠标终于不再召灰，开始有了用武之地，然后就是 GUI 的天下……</p>
<p>然而世事就是这样，锦绣繁华之后就开始返璞归真，大鱼大肉太多就向往点粗茶淡饭，开车开久了就怀念起自行车，GUI 充斥的 Windows 的世界里似乎也开始挂起一阵控制台的清风。毕竟，一旦你熟悉了各种命令和参数，敲键盘的速度还是胜过鼠标的，只是现在的人都太懒或者太忙，总是宁愿牺牲效率而不愿意去多记一点东西。</p>
<p>我个人还是很喜欢命令行的，尤其是远程访问一个系统的时候，一个简单的 ssh 命令直接登录到远程 Linux,一个简单的 scp 命令就可以互相传输文件，这种便利、快捷是 Windows 远程桌面所无法比拟的。GUI 也许是 Windows 的设计哲学， 做什么事情都要靠 GUI。 没错，这大大降低了各种操作门槛，但是作为一个程序员，GUI 工具并非总是最佳选择，但除了 GUI 工具，替代选择并不多——直到 .NET Core 的出现。</p>
<h1 id="专业的控制台程序"><a href="#专业的控制台程序" class="headerlink" title="专业的控制台程序"></a>专业的控制台程序</h1><p>首先我们要有个标准，怎样才算“专业的控制台程序”？</p>
<p>平常无论是写着玩还是工作需要，我都做过一些控制台程序，在启动参数的传入、解析和执行上都比较随意，类似 <code>MyProgram abc 123</code> 这样，<code>MyProgram</code> 是程序名，<code>abc</code>、<code>123</code> 是参数值，内部直接用 <code>args[0]</code>、<code>args[1]</code>取得参数值并使用。仅此而已。时间长了，自己都搞不懂每个参数什么意思，参数有哪些有效值，都得查源代码才知道，每个参数的顺序也很重要，颠倒不得。而内部实现上，至少是 <code>Main</code> 方法里是典型的面条式代码。由此可见，我的这些控制台程序，无论是外在，还是内在，都业余得很。</p>
<p>那一个专业的控制台程序应该是什么样的呢？</p>
<h2 id="完善的帮助信息"><a href="#完善的帮助信息" class="headerlink" title="完善的帮助信息"></a>完善的帮助信息</h2><p>当你面对一个陌生的命令行程序，或者重新面对你自己2个月之前写的命令行程序，你心里第一反应会是什么呢？让我猜猜，你的第一反应一定是“这货到底怎么用？”（不要告诉我我猜错了，我不相信<span class="github-emoji" style="display:inline;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4a2.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a2.png?v8">💢</span>），下一个想法就是这个程序能告诉我用法就好了。一个专业的控制台程序必然会满足你的这个需要——它可以提供完善的帮助信息。比如 git:</p>
<p><img src="git_help.png" alt="git"></p>
<p>有了这些帮助信息，我们自然信心倍增，心里有谱多了。</p>
<p>我希望我写的控制台程序也能做到这点！</p>
<h2 id="符合“国际惯例”的调用方式"><a href="#符合“国际惯例”的调用方式" class="headerlink" title="符合“国际惯例”的调用方式"></a>符合“国际惯例”的调用方式</h2><p>如果你留意一下 Linux 平台下的一众控制台程序，你会发现他们的参数组织和调用方式十分类似，这种约定俗成的“国际惯例”十分有助于降低熟悉各个控制台程序的学习成本。</p>
<p>我们还是以 git 为例，从上面的截图可以看出，它有非常多的参数可用。虽然都是参数，但根据作用不同，可以分为 command, argument, option 三类。我不是控制台程序达人，对这3类参数的区别与联系还在深入理解、学习中。目前的理解是（以 git 为例）：</p>
<ul>
<li><p>command</p>
<p>  一个复杂的控制台程序可以提供多个子命令，而 command 就代表这些子命令</p>
<p>  比如 <code>clone</code>，<code>init</code></p>
</li>
<li><p>argument</p>
<p>  是一个 command 需要的参数。</p>
<p>  比如执行 <code>clone</code> 的时候需要指定一个 repository 的地址，这个地址就是一个 <code>argument</code>。</p>
</li>
<li><p>option</p>
<p>  调整 command 的行为。</p>
<p>  比如对于 <code>clone</code> 可以增加 <code>--verbose</code> 参数使其输出更详尽的信息。</p>
<p>  通常以两个短横线开头后跟参数名，比如 <code>--verbose</code>，对于常用的 option 还会有简写形式，就是一个短横线后跟简写形式的参数名，比如 <code>--verbose</code> 支持简写形式 <code>-v</code>，在帮助里通常以 <code>--verbose, -v</code> 或者 <code>--verbose|-v</code> 的形式说明。</p>
<p>  option 可以有值也可以没有值，有值的时候，其赋值方式不一而足，常见的有用空格的 <code>--branch dev</code>，用等号的（注意等号两边没有空格） <code>--branch=dev</code>，用冒号的（冒号两边没有空格） <code>--branch:dev</code></p>
</li>
</ul>
<p>对于相对简单的控制台程序，可能只有 argument 和 option 而并不包括 command。</p>
<p>看看那些有名的控制台程序，基本上也都遵循这个套路。在这方面，我不想做个怪胎，所以，我希望我写的控制台程序也能遵照这些“国际惯例”！</p>
<h2 id="易于维护的内部实现"><a href="#易于维护的内部实现" class="headerlink" title="易于维护的内部实现"></a>易于维护的内部实现</h2><p>在控制台程序的内部实现上，以前的做法非常简单粗暴，用一堆 <code>if</code> 或者 <code>switch</code> 配合各种 <code>&amp;&amp;</code> 和 <code>||</code> 成功地做到了一开始只有“上帝”和我明白，1个月后只有“上帝”明白的效果。随着程序参数增多、逻辑越来越复杂，这么搞下去，“上帝”依然可以很潇洒，我会被搞死的。为了不让我变成秃头，为了我可以有更多的时间玩游戏，控制台程序的内部实现必须井井有条、易于维护！</p>
<h1 id="问题来了"><a href="#问题来了" class="headerlink" title="问题来了"></a>问题来了</h1><p>了解了一个专业的控制台程序应具备的素质，那么接下来有一个问题萦绕在我心头久久不肯散去……</p>
<p><img src="how.jpg" alt="HOW"></p>
<p>作为一个小白，要实现一个有详细说明信息、调用方式符合“国际惯例”、还能优雅地处理各种参数的控制台程序何其困难？而如此套路化的东西难道没有一套成型的东西供参考吗？</p>
<p><img src="so_hard.jpg" alt="人生为何如此艰难"></p>
<h1 id="CommandLineApplication"><a href="#CommandLineApplication" class="headerlink" title="CommandLineApplication"></a>CommandLineApplication</h1><p>天无绝人之路，一次偶然的邂逅，遇到了它—— <strong>CommandLineApplication</strong>。如果你用 .NET Core 的话，它可以在你构建专业控制台程序的路上助你一臂之力。</p>
<p>它全名是 <code>Microsoft.Extensions.CommandLineUtils.CommandLineApplication</code>，家住 GitHub 省 aspnet 市 Common 区 src 路 Microsoft.Extensions.CommandLineUtils 大院 CommandLine 室.如果你路盲，这里有个<a href="https://github.com/aspnet/Common/blob/dev/src/Microsoft.Extensions.CommandLineUtils/CommandLine/CommandLineApplication.cs" target="_blank" rel="noopener">传送门</a>。</p>
<h2 id="实践是检验真理的唯一标准-MathForKids-程序"><a href="#实践是检验真理的唯一标准-MathForKids-程序" class="headerlink" title="实践是检验真理的唯一标准 - MathForKids 程序"></a>实践是检验真理的唯一标准 - MathForKids 程序</h2><p>让我们从头开始，利用 dotnet cli 和 Visual Studio Code 亲自体验一下它到底有多强大。我们将创建一个 MathForKids 程序，它可以根据参数输出一些加减乘除的算式，让孩子算算结果。</p>
<h3 id="MathForKids-程序的功能"><a href="#MathForKids-程序的功能" class="headerlink" title="MathForKids 程序的功能"></a>MathForKids 程序的功能</h3><ul>
<li><p>它只输出算式，所以我们不要搞得太复杂，不需要什么子命令 command。</p>
<p>  想了解带 command 的用法，可以参考本文最后附上的 CommandLineApplication 的官方测试代码 <span class="github-emoji" style="display:inline;color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f61b.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f61b.png?v8">😛</span></p>
</li>
<li><p>它在执行的时候需要指定输出的算式是加、减、乘、除还是这4种运算符的组合，因此我们可以设置一个 argument: <code>operator</code>.</p>
<p>  这个 argument 可以允许同时设置多个值。 </p>
</li>
<li><p>它可以设置生成的数字的最大值和最小值，因为它们只是调整输出的算式种数字的大小，因此我将其归为 options: <code>minValue</code>, <code>maxValue</code></p>
<p>  <code>minValue</code> 的默认值是0</p>
<p>  <code>maxValue</code> 的默认值是100</p>
</li>
<li><p>它可以设置生成的算式个数，这也只是调整输出结果，因此我也将其归为 option: <code>count</code></p>
<p>  <code>count</code> 的默认值是 10</p>
</li>
</ul>
<h3 id="MathForKids-程序的用法"><a href="#MathForKids-程序的用法" class="headerlink" title="MathForKids 程序的用法"></a>MathForKids 程序的用法</h3><p>在我们看代码之前，先看看这个程序用起来应该是什么样的。</p>
<p><em>注意：在本文发布之时，.NET Core 处于 RC 2 阶段，还不支持编译为本地可执行文件。所以目前必须使用 <code>dotnet MathForKids.dll</code> 来运行。图中红色下划线表示输入的命令</em></p>
<p>首先，它可以提供帮助信息：</p>
<p><img src="MathForKids_Help.png" alt="MathForKids 帮助信息"></p>
<p>从帮助信息中我们可以看到它支持的所有参数，并且支持参数的全写和简写，比如我们可以写 <code>--minValue</code> 也可以简写为 <code>-min</code>。</p>
<p>当我们调用它只生成加法和乘法，其它选项默认时：</p>
<p><img src="MathForKids_Default.png" alt="MathForKids 使用默认 option 调用"></p>
<p><strong>注意，我们一次传入了多个参数： <code>加 乘</code>。</strong></p>
<p>当我们设置一些 option 来改变输出结果时：</p>
<p><img src="MathForKids_WithOptions.png" alt="MathForKids 传入多个 options"></p>
<p><strong>注意，这里演示了使用全写和简写添加 option 以及以多种方式赋值（使用冒号、等号和空格）。</strong></p>
<p>以上使用方法看起来是不是有点“专业”的味道了？</p>
<h2 id="Show-me-the-code"><a href="#Show-me-the-code" class="headerlink" title="Show me the code"></a>Show me the code</h2><p>为了使用 <code>CommandLineApplication</code> 类，我们需要添加对 <code>Microsoft.Extensions.CommandLineUtils</code> 的引用：</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0-*"</span>,</span><br><span class="line">  <span class="attr">"buildOptions"</span>: {</span><br><span class="line">    <span class="attr">"emitEntryPoint"</span>: <span class="literal">true</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">"dependencies"</span>: {</span><br><span class="line">    <span class="attr">"Microsoft.NETCore.App"</span>: {</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"platform"</span>,</span><br><span class="line">      <span class="attr">"version"</span>: <span class="string">"1.0.0-rc2-3002702"</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">"Microsoft.Extensions.CommandLineUtils"</span>: <span class="string">"1.0.0-rc2-final"</span> <span class="comment">//&lt;--- add this dependency</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">"frameworks"</span>: {</span><br><span class="line">    <span class="attr">"netcoreapp1.0"</span>: {</span><br><span class="line">      <span class="attr">"imports"</span>: <span class="string">"dnxcore50"</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>这是 MathForKids 程序的主体部分，说明都在注释里：</p>
<figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> Microsoft.Extensions.CommandLineUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">ConsoleApplication</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    {</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        {</span><br><span class="line">            CommandLineApplication app = <span class="keyword">new</span> CommandLineApplication();</span><br><span class="line">            app.HelpOption(<span class="string">"--help|-h|-?"</span>); <span class="comment">// 使其支持显示帮助信息</span></span><br><span class="line">            app.VersionOption(<span class="string">"--version|-v"</span>, <span class="string">"1.0.0"</span>); <span class="comment">// 使其支持显示版本信息。为了简化起见，直接返回静态的 1.0.0</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 添加 argument，这里我们允许传入这个 argument 的多个值。</span></span><br><span class="line">            CommandArgument argOperator = app.Argument(<span class="string">"operator"</span>, <span class="string">"算式类型，有效值：加、减、乘、除，可以设置多个类型"</span>, multipleValues: <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 添加多个 options，注意设置全写和简写的方式，很简单。这应该是基于约定的解析处理方式。</span></span><br><span class="line">            CommandOption optMin = app.Option(<span class="string">"--minValue -min &lt;value&gt;"</span>, <span class="string">"最小值，默认为0"</span>, CommandOptionType.SingleValue);</span><br><span class="line">            CommandOption optMax = app.Option(<span class="string">"--maxValue -max &lt;value&gt;"</span>, <span class="string">"最大值，默认为100"</span>, CommandOptionType.SingleValue);</span><br><span class="line">            CommandOption optCount = app.Option(<span class="string">"--count -c &lt;value&gt;"</span>, <span class="string">"生成的算式数量，默认为10"</span>, CommandOptionType.SingleValue);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 传入一个委托方法，当下面的 Execute 执行后会执行我们的委托方法，完成我们需要处理的工作。 委托方法需要返回一个 int，反映执行结果，一如经典的控制台程序需要的那样。</span></span><br><span class="line">            app.OnExecute(() =&gt;</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">return</span> OnAppExecute(argOperator, optMin, optMax, optCount);</span><br><span class="line">            });</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 开始执行，把控制台传入的参数直接传递给 CommandLineApplication。</span></span><br><span class="line">            app.Execute(args);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">OnAppExecute</span>(<span class="params">CommandArgument argOperator, CommandOption optMin, CommandOption optMax, CommandOption optCount</span>)</span></span><br><span class="line"><span class="function"></span>        {</span><br><span class="line">            <span class="comment">// 此处省略 100 行以示例取代</span></span><br><span class="line">            List&lt;<span class="keyword">string</span>&gt; operators = argOperator.Values;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">string</span> max;</span><br><span class="line">            <span class="keyword">if</span>(optMax.HasValue())</span><br><span class="line">                max = optMax.Value();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>CommandArgument</code> 和 <code>CommandOption</code> 的使用非常简单，有 <code>HasValue</code> 和 <code>Value</code> 等方法可以判断和取值。</p>
<p>所有代码放在我的 <a href="https://github.com/RickyLin/Demos/tree/master/MathForKids" target="_blank" rel="noopener">GitHub</a> 里。</p>
<p>官方的<a href="https://github.com/aspnet/Common/blob/master/test/Microsoft.Extensions.CommandLineUtils.Tests/CommandLineApplicationTests.cs" target="_blank" rel="noopener">测试类</a>也是一个很好的参考资源。</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
	
	</div>
  <a type="button" href="/2016/06/15/TryOutCommandLineApplication/#more" class="btn btn-default more">阅读此文</a>
</div>

           
		
           
			  
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2014-07-29 </div>
			<div class="article-title"><a href="/2014/07/29/zai-shu-ru-shi-zi-dong-ge-shi-hua-dian-hua-hao-ma/" >在输入时自动格式化电话号码</a></div>						
		</h3>
	


			  <div class="entry">
  <div class="row">
	
	
		<p>以下代码用来在用户输入时自动格式化电话号码，格式为『nnn-nnn-nnnn』，留在这里备忘。里面的正则表达式是 Google 到的，不得不佩服这个正则表达式的作者的功底。</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'body'</span>).on(<span class="string">'keydown'</span>, <span class="string">'input[type=tel]'</span>, <span class="literal">null</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> that = $(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">var</span> tel = that.val();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/^\d{4}$/</span>.test(tel) || <span class="regexp">/^\d{3}-\d{4}$/</span>.test(tel)) {</span><br><span class="line">    	that.val(tel.replace(<span class="regexp">/(\d{3})(?!\-)/g</span>, <span class="string">"$1-"</span>));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (tel.length &gt; <span class="number">12</span>) {</span><br><span class="line">    	that.val(tel.substr(<span class="number">0</span>, <span class="number">12</span>));</span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
	
	</div>
  <a type="button" href="/2014/07/29/zai-shu-ru-shi-zi-dong-ge-shi-hua-dian-hua-hao-ma/#more" class="btn btn-default more">阅读此文</a>
</div>

           
		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/7/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> 上一页</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/9/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			<div class="widget">
    
	    <h4 class="dsq-widget-title">最新留言</h4>
		<div id="recent-comments"></div>
		<script type="text/javascript">
		    getRecentCommentsList({
			   type: "github" ? "github" : "github",
			   user: "rickylin",
               repo: "BlogComments",
               client_id: "c345ccb22c518a9ffba5",
               client_secret: "65b82b6548d7c441725ba6b0dd18476ab4cc8cf1",
			   count: "5" ? "5" : 5,
			   recent_comments_target: "#recent-comments"
			});
		</script>
	
</div>

		
			
		
			
	<div class="widget">
		<h4>标签云</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/ASP-NET-Core/">ASP.NET-Core<span>3</span></a></li>
		
			<li><a href="/tags/SQL-Server/">SQL-Server<span>7</span></a></li>
		
			<li><a href="/tags/IIS/">IIS<span>1</span></a></li>
		
			<li><a href="/tags/Go-lang/">Go-lang<span>1</span></a></li>
		
			<li><a href="/tags/Testing/">Testing<span>1</span></a></li>
		
			<li><a href="/tags/7zip/">7zip<span>2</span></a></li>
		
			<li><a href="/tags/VisualStudio/">VisualStudio<span>2</span></a></li>
		
			<li><a href="/tags/Windows/">Windows<span>2</span></a></li>
		
			<li><a href="/tags/Office-365/">Office-365<span>2</span></a></li>
		
			<li><a href="/tags/jqGrid/">jqGrid<span>1</span></a></li>
		
			<li><a href="/tags/XUnit/">XUnit<span>1</span></a></li>
		
			<li><a href="/tags/NET-Core/">.NET-Core<span>8</span></a></li>
		
			<li><a href="/tags/ASP-NET-WebForm/">ASP.NET-WebForm<span>3</span></a></li>
		
			<li><a href="/tags/GitHub/">GitHub<span>1</span></a></li>
		
			<li><a href="/tags/Markdown/">Markdown<span>1</span></a></li>
		
			<li><a href="/tags/MacOS/">MacOS<span>1</span></a></li>
		
			<li><a href="/tags/HTML/">HTML<span>1</span></a></li>
		
			<li><a href="/tags/Linux/">Linux<span>1</span></a></li>
		
			<li><a href="/tags/Oh-My-Zsh/">Oh-My-Zsh<span>1</span></a></li>
		
			<li><a href="/tags/Deployment/">Deployment<span>1</span></a></li>
		
		
		   <li><a href="/tags">...<span>30</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>最新文章</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2019/07/28/install-xrdp-in-debian/" ><i class="fa fa-file-o"></i>在 Debian 里安装 xrdp 以通过 Windo...</a>
      </li>
    
      <li>
        <a href="/2019/07/21/setup-certificate-for-remote-desktop-connection/" ><i class="fa fa-file-o"></i>设置 Windows 远程桌面使用正确的域名证书</a>
      </li>
    
      <li>
        <a href="/2019/03/06/rdlc-export-type/" ><i class="fa fa-file-o"></i>RDLC 支持的导出格式</a>
      </li>
    
      <li>
        <a href="/2019/01/13/set-underscore-as-prefix-for-private-field-in-class-or-struct/" ><i class="fa fa-file-o"></i>在 VS 2017中设置自定义命名规范——类型私有字段...</a>
      </li>
    
      <li>
        <a href="/2018/05/20/add-new-tempdb-user-when-startup/" ><i class="fa fa-file-o"></i>自动向 TempDB 数据库添加用户和权限</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>链接</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/rickylin" title="My Github account." target="_blank"]);">My Github</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->


    </div>
  </div>
  <div class="container-narrow">
    <footer> <div>
  <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">
    <img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
  </a>
  <br />
  本作品采用<a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
</div>
<div>
  &copy; 2020 Ricky Lin
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/" target="_blank" rel="noopener">Freemind</a>.    
  </div> </footer>
  </div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




<!-- syntax highlighting -->

  <script>
  marked.setOptions({
    highlight: function (code, lang) {
        return hljs.highlightAuto(code).value;
    }
  });
  function Highlighting(){
    var markdowns = document.getElementsByClassName('markdown');
    for(var i=0;i<markdowns.length;i++){
        if(markdowns[i].innerHTML) markdowns[i].innerHTML =marked(markdowns[i].innerHTML);
    }
  }
  window.addEventListener('DOMContentLoaded', Highlighting, false);
  window.addEventListener('load', Highlighting, false);
  </script>


</body>
</html>